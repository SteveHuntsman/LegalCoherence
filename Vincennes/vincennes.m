fileDir = '.';
claimPairsJSON = fileread([fileDir,filesep,'claimPairs.json']);
% Produce cell array of cell arrays
foo = jsondecode(claimPairsJSON);
claimPairs = "";
for j = 1:numel(foo)
    claimPairs(j,1) = foo{j}{1};
    claimPairs(j,2) = foo{j}{2};
end

%%
positiveEvidence = ["F-14s had been recently moved to Bandar Abbas.",...
    "Iranian fighters had flown coincident with surface engagement on 18 April 1988.",...
    "Track 4131 was not responding to verbal warnings over [air distress frequencies].",...
    "There had been warnings of an increased threat over the July 4th weekend.",...
    "Increased hostile activity had been predicted for the 48 hours following recent Iraqi military victory.",...
    "Track 4131 was not following the air corridor in the same manner as other commercial aircraft had been seen consistently to behave (i.e. flying exactly on the centerline).",...
    "Track 4131 was flying at a reported altitude which was lower than [commerical airliners] were observed to fly in the past.",...
    "Track 4131 was reported to be increasing in speed.",...
    "Track 4131 was reported to be decreasing in altitude.",...
    "Track 4131 was [at constant bearing, with decreasing range] to USS VINCENNES and USS MONTGOMERY.",...
    "Track 4131 was reported by USS VINCENNES's personnel squawking Mode II-1100 which correlates with an F-14.",...
    "No [electronic emissions were reported] from track 4131, however, F-14s can fly [without electronic emissions].",...
    "F-14s have an air-to-surface capability with Maverick and modified Eagle missiles.",...
    "Track 4131 appeared to be maneuvering into an attack position.",...
    "Visual identification of track 4131 was not feasible."];

%%
negativeEvidenceIndices = [6,7,9];
negativeEvidence = ["Track 4131 was following the air corridor in the same manner as other commercial aircraft had been seen consistently to behave (i.e. flying exactly on the centerline).",...
    "Track 4131 was flying at a reported altitude which was the same as commerical airliners were observed to fly in the past.",...
    "Track 4131 was reported to be increasing in altitude."];

%% 
positiveHypotheses = ["Iran was intending to mount an attack.",...
                      "Track 4131 was an F-14.",...
                      "Track 4131 intended to attack.",...
                      "Track 4131 was flying without electronic emissions."];

%%
negativeHypotheses = ["Track 4131 was a commercial airliner.",...
                      "Track 4131 was taking off."];

%% After munging in text editor to save hassle
scores3 = [0., 0., 0., 0., 0., 0., 0., 0., 0., 0.;...
    0., 0., 0., 0., 0., 0., 0., 0., 0., 0.;...
    0., 0., 0., 0., 0., 0., 0., 0., 0., 0.;...
    8.,  8.,  8.,  7., 10.,  8.,  8.,  9.,  9.,  9.;...
    8.,  8.,  8., 10.,  8.,  8.,  9.,  9., 10.,  8.;...
    8.,  8.,  6.,  7.,  8.,  7.,  8., 10.,  8., 10.;...
    10., 10., 10.,  9.,  8.,  8.,  8.,  8.,  8.,  9.;...
    9.,  5.,  6., 10., 10., 10., 10., 10., 10., 10.;...
    8.,  9.,  7., 10., 10., 10.,  9.,  8.,  8.,  8.;...
    8.,  9., 10.,  8.,  6.,  8.,  9.,  8.,  8.,  9.;...
    10., 10., 10., 10., 10.,  8., 10., 10., 10., 10.;...
    0., 10.,  7.,  8.,  6., 10.,  5.,  8., 10., 10.;...
    10.,  5., 10., 10., 10., 10., 10., 10., 10., 10.;...
    10.,  0., 10.,  8., 10., 10.,  8.,  7., 10., 10.;...
    10., 10., 10., 10.,  6.,  2.,  8., 10., 10., 10.;...
    8., 10.,  7.,  8., 10.,  8.,  8.,  8.,  8.,  7.;...
    7., 10., 10., 10.,  5., 10.,  9.,  8.,  0., 10.;...
    7.,  8.,  9.,  4.,  4.,  2.,  0.,  7.,  0., 10.;...
    8.,  8.,  8.,  8.,  8.,  8.,  8., 10.,  9., 10.;...
    0., 10.,  8.,  3.,  8.,  8., 10., 10., 10.,  0.;...
    10., 10.,  0.,  0.,  0.,  9.,  7., 10.,  0.,  7.;...
    8.,  9.,  9., 10.,  6.,  9.,  9.,  9.,  8.,  8.;...
    9., 10.,  7.,  8.,  8.,  7.,  8.,  8.,  7.,  8.;...
    8., 7., 7., 8., 9., 8., 9., 8., 8., 9.;...
    8.,  8.,  8.,  8.,  8.,  7., 10., 10.,  7., nan;...
    9.,  8., 10.,  8.,  8., 10.,  8.,  8.,  8., 10.;...
    2.,  8., 10., 10., 10.,  8.,  8.,  6.,  4.,  8.;...
    10.,  9.,  8., 10.,  9., 10., 10.,  7.,  9.,  8.;...
    10.,  5., 10.,  8.,  7., 10.,  7.,  7.,  8.,  9.;...
    10.,  9.,  9.,  5.,  7.,  9.,  8.,  9.,  7.,  8.;...
    10.,  7.,  7.,  8.,  4.,  8.,  7.,  6., 10.,  6.;...
    7.,  8., 10.,  6.,  8.,  9., 10.,  8.,  8.,  9.;...
    0.,  6., 10., 10., 10., 10.,  8.,  8.,  8., 10.;...
    4.,  7., 10.,  8., 10.,  9., 10.,  5.,  4.,  8.;...
    10.,  0.,  8.,  0., 10., 10.,  7.,  8.,  0., 10.;...
    3., 8., 0., 6., 6., 8., 4., 6., 7., 7.;...
    10.,  8.,  8.,  8.,  8., 10.,  7., 10.,  8., 10.;...
    8., 10.,  0., 10.,  8.,  5.,  9.,  7.,  0.,  1.;...
    10., 10., 10., 10.,  9.,  0.,  8., 10.,  8.,  9.;...
    10.,  8.,  7.,  8., 10.,  6.,  9., 10.,  8., 10.;...
    6., 10., 10., 10., 10.,  0.,  8.,  9.,  8.,  0.;...
    3.,  7.,  6.,  9.,  8.,  8.,  9.,  8., 10.,  8.;...
    8.,  8.,  8.,  8., 10.,  8.,  8.,  8., 10.,  9.;...
    0.,  0.,  0.,  0., 10.,  0.,  2.,  0.,  0.,  0.;...
    0.,  8.,  0.,  0., 10.,  9., 10.,  0.,  0.,  0.;...
    9., 8., 8., 8., 8., 8., 8., 8., 4., 9.;...
    5., 10., 10., 10., 10., 10.,  9.,  6., 10., 10.;...
    9., 9., 9., 8., 8., 7., 8., 9., 7., 8.;...
    10.,  8.,  8.,  7., 10.,  8., 10.,  8.,  0., 10.;...
    10., 10., 10., 10., 10., 10., 10.,  2.,  9., 10.;...
    0., 5., 6., 0., 0., 0., 0., 2., 0., 7.;...
    10.,  7.,  7.,  8.,  8.,  8.,  8.,  8., 10.,  7.;...
    10., 10.,  0.,  6., 10., 10.,  9., 10., 10.,  0.;...
    6., 0., 0., 9., 2., 0., 0., 0., 7., 8.;...
    10.,  7., 10.,  0.,  8.,  8.,  8., 10.,  0.,  8.;...
    10., 10., 10., 10., 10., 10., 10., 10., 10., 10.;...
    10.,  0.,  0.,  0.,  0.,  0.,  0., 10.,  0.,  0.;...
    5.,  7.,  9., 10.,  5.,  8.,  8.,  9.,  7., 10.;...
    10.,  8.,  8., 10., 10., 10.,  8., 10., 10., 10.;...
    10.,  8., 10., 10.,  8., 10., 10., 10.,  8.,  8.;...
    4., 8., 8., 8., 8., 6., 8., 8., 8., 8.;...
    10.,  8.,  0.,  2., 10., 10., 10., 10.,  2., 10.;...
    10.,  0.,  0.,  0.,  0.,  0.,  0., 10.,  0.,  0.;...
    6.,  8.,  8.,  6.,  9.,  8.,  8., 10., 10., 10.;...
    10., 10., 10., 10.,  9., 10., 10., 10., 10., 10.;...
    5., 0., 8., 8., 2., 8., 9., 7., 5., 8.;...
    0., 0., 0., 0., 0., 0., 0., 0., 0., 7.;...
    0., 0., 0., 0., 0., 0., 0., 0., 0., 0.;...
    0.,  8., 10.,  2., 10.,  8.,  6.,  8.,  6.,  0.;...
    8., 8., 9., 4., 8., 7., 7., 8., 8., 9.;...
    10., 10., 10., 10., 10., 10., 10., 10.,  8., 10.;...
    8.,  8., 10.,  9.,  6., 10., 10.,  7.,  0.,  8.;...
    10.,  7., 10.,  8., 10., 10., 10., 10., 10., 10.;...
    8., 10., 10.,  8.,  6.,  0., 10.,  8., 10.,  0.;...
    9., 10., 10.,  8.,  9.,  9.,  7., 10.,  9.,  8.;...
    10., 10., 10.,  8.,  8.,  8.,  8., 10., 10.,  9.;...
    10.,  8., 10.,  8., 10., 10., 10., 10., 10., 10.;...
    6.,  8.,  9., 10.,  8.,  8.,  9.,  7.,  8.,  8.;...
    7., 10.,  0.,  8., 10., 10.,  0., 10.,  8.,  7.;...
    10.,  6., 10.,  8., 10.,  0.,  8., 10., 10.,  0.;...
    10., 10., 10., 10., 10., 10., 10., 10., 10.,  8.;...
    10., 10., 10., 10., 10.,  9., 10., 10., 10., 10.;...
    10., 10., 10.,  9., 10., 10., 10., 10., 10., 10.;...
    8., 7., 9., 8., 8., 8., 8., 9., 8., 8.;...
    0., 2., 8., 8., 8., 2., 7., 2., 0., 0.;...
    0., 0., 0., 8., 0., 0., 0., 0., 9., 0.;...
    0., 0., 0., 0., 0., 0., 0., 0., 0., 0.;...
    8., 10., 10., 10.,  7.,  8.,  7., 10., 10.,  8.;...
    0.,  0., 10., 10.,  0.,  0.,  5.,  8.,  0.,  2.;...
    8., 10.,  2.,  0.,  0.,  9.,  8., 10.,  8.,  0.;...
    9., 10., 10.,  9.,  0., 10.,  6.,  9., 10., 10.;...
    10.,  8.,  7.,  8.,  0., 10.,  0.,  8., 10.,  0.;...
    10.,  0., 10.,  0.,  7.,  4., 10., 10., 10.,  0.;...
    0.,  0.,  2.,  0.,  0.,  0., 10., 10.,  0.,  0.;...
    0., 0., 0., 0., 0., 0., 0., 1., 0., 0.;...
    0., 2., 0., 0., 0., 0., 0., 0., 1., 0.;...
    7., 0., 0., 7., 8., 0., 3., 0., 6., 0.;...
    10., 10., 10., 10., 10., 10., 10., 10., 10., 10.;...
    0., 3., 0., 0., 0., 0., 0., 0., 0., 0.;...
    8., 10.,  8.,  3.,  4.,  0.,  2.,  9.,  8.,  0.;...
    0., 0., 0., 0., 0., 0., 0., 0., 0., 0.;...
    0.,  0.,  2.,  0.,  7.,  0., 10.,  0.,  0.,  0.;...
    6., 2., 8., 8., 5., 0., 5., 9., 7., 0.;...
    6.,  9., 10.,  0.,  8., 10.,  0.,  6., 10., 10.;...
    0.,  5.,  0.,  0., 10.,  0.,  0.,  0., 10.,  0.;...
    7.,  3.,  6.,  7., 10.,  8., 10.,  8.,  8.,  7.;...
    0., 10.,  0.,  9., 10., 10.,  0., 10., 10., 10.;...
    8., 8., 8., 9., 0., 8., 2., 8., 0., 9.;...
    8.,  7.,  8.,  7., 10.,  8.,  7.,  8.,  5.,  8.;...
    10.,  8., 10., 10.,  0., 10.,  7.,  8., 10., 10.;...
    10., 10.,  0., 10.,  0.,  0.,  9., 10., 10.,  0.;...
    9., 9., 8., 9., 9., 8., 9., 9., 9., 7.;...
    8., 10.,  8., 10.,  9.,  9., 10.,  9., 10., 10.;...
    8., 10., 10.,  9.,  9.,  7.,  9.,  9.,  9.,  8.;...
    9., 10., 10., 10., 10., 10.,  8., 10., 10.,  8.;...
    0., 10.,  0.,  0.,  0., 10.,  7., 10.,  8., 10.;...
    0.,  2.,  0.,  3.,  9.,  0.,  0.,  0.,  8., 10.;...
    0.,  8.,  9.,  7.,  0., 10.,  0., 10.,  9.,  9.;...
    8.,  7.,  7.,  8.,  8.,  8., 10.,  8.,  7.,  8.;...
    0., 0., 0., 0., 0., 0., 0., 0., 0., 0.;...
    10., 10., 10., 10., 10., 10., 10., 10., 10., 10.;...
    0., 0., 0., 0., 0., 0., 0., 0., 0., 0.;...
    0., 10.,  0.,  8.,  0.,  0.,  0.,  0.,  0.,  0.;...
    0.,  0.,  0.,  9.,  0., 10.,  4., 10.,  7.,  9.;...
    0.,  0.,  0.,  0., 10.,  0., 10.,  0., 10.,  0.;...
    10., 10., 10., 10., 10., 10., 10., 10., 10., 10.];


%% After munging in text editor to save hassle
scores4 = [0., 0., 0., 0., 0., 0., 0., 0., 0., 0.;...
    0., 0., 0., 0., 0., 0., 0., 0., 0., 0.;...
    0., 0., 0., 0., 0., 0., 0., 0., 0., 0.;...
    10., 10., 10., 10.,  7.,  8.,  7., 10., 10., 10.;...
    10., 10., 10., 10., 10.,  8., 10., 10., 10., 10.;...
    10.,  7.,  5., 10.,  7., 10., 10., 10.,  8., 10.;...
    10., 10., 10., 10., 10., 10., 10., 10., 10., 10.;...
    10., 10., 10., 10., 10., 10., 10., 10., 10., 10.;...
    10., 10., 10., 10., 10., 10., 10., 10., 10., 10.;...
    7., 7., 7., 7., 8., 8., 7., 7., 7., 7.;...
    10.,  8., 10., 10., 10.,  8.,  7., 10., 10.,  8.;...
    7., 10.,  5.,  7., 10., 10., 10.,  5.,  5., 10.;...
    10., 10., 10., 10., 10., 10., 10., 10., 10., 10.;...
    10., 10., 10., 10., 10., 10., 10., 10., 10., 10.;...
    10., 10., 10., 10., 10.,  8., 10., 10., 10., 10.;...
    8., 10.,  6.,  4.,  3.,  5.,  5.,  5.,  8.,  6.;...
    10., 10., 10., 10., 10., 10., 10., 10., 10., 10.;...
    6., 7., 4., 6., 8., 7., 6., 5., 3., 7.;...
    10.,  9., 10., 10., 10., 10., 10., 10., 10., 10.;...
    10., 10., 10., 10., 10., 10., 10., 10., 10., 10.;...
    10., 10., 10., 10.,  7., 10.,  9., 10., 10., 10.;...
    10., 10., 10., 10., 10., 10., 10., 10., 10., 10.;...
    10., 10.,  8., 10., 10.,  7., 10.,  8., 10.,  6.;...
    8., 10.,  8., 10.,  7.,  7., 10.,  8.,  7.,  6.;...
    10., 10., 10., 10., 10., 10., 10., 10.,  8., 10.;...
    10., 10., 10., 10., 10., 10., 10., 10., 10., 10.;...
    10., 10., 10., 10., 10., 10., 10., 10., 10., 10.;...
    10., 10., 10., 10., 10., 10., 10., 10.,  9., 10.;...
    10., 10., 10., 10., 10., 10., 10.,  8.,  7., 10.;...
    8.,  7.,  8.,  6.,  9.,  8.,  7., 10.,  7.,  8.;...
    10., 10., 10., 10., 10., 10., 10., 10., 10., 10.;...
    10., 10., 10., 10., 10., 10., 10., 10., 10., 10.;...
    10., 10., 10., 10., 10., 10., 10., 10., 10., 10.;...
    4., 6., 3., 5., 5., 5., 5., 3., 3., 7.;...
    10., 10., 10., 10., 10.,  9.,  8., 10., 10., 10.;...
    5., 5., 6., 3., 7., 6., 5., 6., 4., 5.;...
    10., 10., 10., 10., 10., 10., 10., 10.,  7., 10.;...
    10., 10., 10., 10., 10., 10.,  7., 10., 10., 10.;...
    10., 10.,  8., 10., 10.,  9., 10., 10., 10., 10.;...
    10., 10., 10., 10., 10., 10., 10., 10., 10., 10.;...
    10., 10., 10., 10., 10., 10., 10., 10., 10.,  8.;...
    5., 10.,  8.,  4., 10., 10., 10.,  7.,  6., 10.;...
    10., 10., 10., 10., 10., 10., 10., 10., 10., 10.;...
    7., 10., 10., 10.,  7., 10., 10.,  7.,  6.,  6.;...
    10., 10., 10., 10., 10., 10., 10., 10., 10., 10.;...
    6.,  7., 10.,  6.,  8.,  5.,  6.,  7., 10., 10.;...
    10., 10., 10., 10., 10., 10., 10., 10., 10., 10.;...
    7., 7., 7., 7., 7., 8., 8., 7., 7., 7.;...
    10., 10., 10., 10., 10., 10., 10., 10., 10., 10.;...
    10., 10., 10., 10., 10., 10., 10., 10., 10., 10.;...
    10., 10., 10., 10., 10., 10., 10., 10., 10., 10.;...
    10., 10., 10., 10., 10., 10., 10., 10., 10., 10.;...
    10., 10., 10., 10., 10., 10., 10., 10., 10., 10.;...
    5., 8., 7., 7., 8., 5., 7., 5., 6., 7.;...
    10., 10., 10., 10., 10., 10., 10., 10., 10., 10.;...
    10., 10., 10., 10., 10., 10., 10., 10., 10., 10.;...
    1., 0., 0., 0., 0., 0., 2., 0., 0., 0.;...
    7., 8., 7., 7., 7., 7., 7., 5., 8., 7.;...
    10., 10., 10., 10., 10., 10., 10., 10., 10., 10.;...
    8., 10.,  8.,  8.,  8.,  8.,  7.,  8.,  7., 10.;...
    10., 10., 10., 10., 10., 10., 10., 10., 10., 10.;...
    10., 10., 10., 10., 10., 10., 10., 10., 10., 10.;...
    10., 10., 10., 10., 10., 10., 10., 10.,  8., 10.;...
    7., 10.,  7.,  7.,  7.,  6.,  7.,  7.,  6.,  6.;...
    10., 10., 10., 10., 10., 10., 10., 10., 10., 10.;...
    7.,  5.,  5.,  6.,  7.,  7.,  7.,  7.,  7., 10.;...
    0., 0., 0., 0., 0., 0., 0., 0., 0., 0.;...
    0., 0., 0., 0., 0., 0., 0., 0., 0., 0.;...
    10., 10., 10., 10., 10., 10., 10., 10., 10., 10.;...
    10., 10.,  6.,  6.,  5.,  6.,  6.,  7.,  6.,  7.;...
    10., 10., 10., 10., 10., 10., 10., 10., 10., 10.;...
    10.,  9.,  6.,  8.,  8.,  8.,  7., 10., 10.,  7.;...
    10., 10., 10., 10., 10., 10., 10., 10., 10., 10.;...
    2.,  1.,  7.,  0.,  0.,  0.,  1.,  0., 10.,  0.;...
    10., 10., 10., 10., 10., 10., 10., 10., 10., 10.;...
    10., 10., 10.,  7.,  9.,  8.,  8.,  8.,  8.,  7.;...
    10., 10., 10., 10., 10., 10., 10., 10., 10., 10.;...
    10.,  5.,  5., 10., 10.,  7., 10.,  7., 10., nan;...
    10., 10., 10., 10., 10., 10., 10., 10., 10., 10.;...
    10., 10., 10., 10., 10., 10., 10., 10., 10., 10.;...
    10., 10., 10., 10., 10., 10., 10., 10., 10., 10.;...
    7.,  8., 10., 10.,  7., 10.,  7.,  8.,  8.,  8.;...
    8., 10., 10., 10., 10., 10., 10., 10., 10., 10.;...
    10., 10., 10., 10., 10., 10., 10., 10.,  8., 10.;...
    10., 10., 10., 10., 10., 10., 10., 10., 10., 10.;...
    2.,  7., 10.,  2.,  2.,  8.,  7.,  6.,  8., 10.;...
    0., 5., 2., 2., 3., 2., 2., 6., 2., 0.;...
    10., 10., 10., 10., 10., 10., 10., 10., 10., 10.;...
    10., 10., 10.,  8., 10., 10.,  9.,  8., 10., 10.;...
    10., 10., 10., 10., 10., 10., 10., 10., 10.,  7.;...
    10., 10.,  8., 10., 10.,  7., 10., 10., 10., 10.;...
    10., 10., 10., 10., 10., 10., 10., 10., 10., 10.;...
    10., 10., 10., 10., 10., 10., 10., 10., 10., 10.;...
    10., 10., 10., 10., 10., 10., 10., 10.,  7., 10.;...
    7.,  8.,  7.,  6., 10., 10.,  8.,  7.,  3.,  8.;...
    0., 0., 0., 0., 0., 0., 0., 0., 1., 0.;...
    10., 10., 10.,  3., 10., 10.,  8.,  7., 10., 10.;...
    10., 10., 10., 10., 10., 10., 10., 10., 10., 10.;...
    0.,  7., nan,  0.,  0.,  8.,  9.,  0.,  0.,  8.;...
    10., 10., 10., 10., 10., 10., 10., 10., 10., 10.;...
    10., 10.,  8., 10., 10., 10.,  8., 10., 10., 10.;...
    10., 10., 10., 10., 10., 10., 10., 10., 10.,  2.;...
    10., 10., 10., 10., 10., 10., 10., 10., 10., 10.;...
    9.,  8.,  9.,  8.,  9.,  9.,  8.,  9., 10., 10.;...
    0.,  7., 10., 10.,  0.,  0.,  0.,  0.,  2.,  2.;...
    10., 10., 10., 10., 10., 10., 10.,  7., 10., 10.;...
    10., 10., 10., 10., 10., 10., 10., 10., 10., 10.;...
    5.,  5., 10., 10.,  7.,  7.,  7.,  7., 10.,  7.;...
    10., 10., 10., 10., 10., 10., 10., 10., 10., 10.;...
    10., 10., 10., 10., 10., 10., 10., 10., 10., 10.;...
    10., 10., 10., 10., 10., 10., 10., 10., 10., 10.;...
    8.,  8.,  8.,  7.,  8., 10.,  7.,  8.,  8.,  7.;...
    10., 10., 10.,  9.,  7.,  8., 10.,  9., 10., 10.;...
    10.,  8.,  7.,  7.,  8., 10., 10.,  8., 10., 10.;...
    8.,  8., 10.,  8.,  6.,  7., 10.,  8.,  7.,  7.;...
    10., 10., 10., 10., 10., 10., 10., 10., 10., 10.;...
    8., 10.,  7., 10., 10.,  8., 10., 10., 10., 10.;...
    10., 10., 10., 10., 10., 10., 10., 10., 10., 10.;...
    10., 10., 10., 10., 10., 10., 10., 10., 10., 10.;...
    0., 0., 0., 0., 0., 0., 0., 0., 0., 0.;...
    10., 10., 10., 10., 10., 10., 10., 10., 10., 10.;...
    0., 0., 0., 0., 0., 0., 0., 0., 0., 0.;...
    10.,  3.,  2., 10., 10., 10.,  5., 10.,  7.,  8.;...
    2., 3., 0., 4., 0., 6., 4., 2., 7., 2.;...
    9.,  4., 10.,  0.,  0., 10.,  8.,  3.,  4., 10.;...
    10., 10., 10., 10., 10., 10., 10., 10., 10., 10.];

%%
vertices = [positiveHypotheses,...
    positiveEvidence,...
    negativeEvidence,...
    negativeHypotheses];

%%
% abbrev = [append("PH",string(1:numel(positiveHypotheses))),...
%     append("PE",string([1:14,16])),...  % "E15" purposely omitted
%     append("NE",string([6,7,9])),...     % paired with PE
%     append("NH",string(1:numel(negativeHypotheses)))];
abbrev = [append("A",string(1:numel(positiveHypotheses))),...
    append("E",string([1:14,16])),...  % "E15" purposely omitted
    append("NE",string([6,7,9])),...     % paired with PE
    append("C",string(1:numel(negativeHypotheses)))];

%%
nums = [numel(positiveHypotheses),...
    numel(positiveEvidence),...
    numel(negativeEvidence),...
    numel(negativeHypotheses)];
ind1 = cumsum(nums);
ind0 = [1,ind1(1:end-1)+1];

%%
scoreG = median(scores4,2,"omitnan");
G = graph(claimPairs(:,1),claimPairs(:,2),scoreG,vertices);

%% Restrict to subgraph with connectivity in Thagard (1992)
abbrevPairs = claimPairs;
for v = 1:numel(vertices)
    ind = ismember(claimPairs,vertices(v));
    abbrevPairs(ind) = abbrev(v);
end
%
abbrevG = graph(abbrevPairs(:,1),abbrevPairs(:,2),scoreG,abbrev);
%
ThagardPairs = ...
    ["A1","A2";"A1","A3";"A1","E1";"A1","E4";"A1","E5";...
    "A2","A3";"A2","A4";"A2","E3";"A2","E6";"A2","E7";"A2","E8";"A2","E9";"A2","E11";"A2","E12";"A2","C1";"A2","C2";...
    "A3","A4";"A3","E3";"A3","E8";"A3","E9";"A3","E10";"A3","E14";"A3","C1";"A3","C2";...
    "A4","E12";"A4","C1";...
    "E6","NE6";...
    "E7","NE7";...
    "E8","C1";"E8","C2";...
    "E9","NE9";...
    "E12","C1";...
    "NE6","C1";...
    "NE7","C1";...
    "NE9","C2";...
    "C1","C2"];
% ThagardPairs = ...
%     ["PH1","PH2";"PH1","PH3";"PH1","PE1";"PH1","PE4";"PH1","PE5";...
%     "PH2","PH3";"PH2","PH4";"PH2","PE3";"PH2","PE6";"PH2","PE7";"PH2","PE8";"PH2","PE9";"PH2","PE11";"PH2","PE12";"PH2","NH1";"PH2","NH2";...
%     "PH3","PH4";"PH3","PE3";"PH3","PE8";"PH3","PE9";"PH3","PE10";"PH3","PE14";"PH3","NH1";"PH3","NH2";...
%     "PH4","PE12";"PH4","NH1";...
%     "PE6","NE6";...
%     "PE7","NE7";...
%     "PE8","NH1";"PE8","NH2";...
%     "PE9","NE9";...
%     "PE12","NH1";...
%     "NE6","NH1";...
%     "NE7","NH1";...
%     "NE9","NH2";...
%     "NH1","NH2"];
% % Map back to original graph
indT = findedge(abbrevG,ThagardPairs(:,1),ThagardPairs(:,2));
assert(isequal(ThagardPairs,string(abbrevG.Edges.EndNodes(indT,:))),'indG');
subG = graph(abbrevG.Edges.EndNodes(indT,1),abbrevG.Edges.EndNodes(indT,2),...
    abbrevG.Edges.Weight(indT),abbrev);

%%
ThagardWeights = [10,10,10,10,10,...
    10,10,10,10,10,10,10,10,10,0,0,...
    10,10,10,10,10,10,0,0,...
    10,0,...
    0,...
    0,...
    10,10,...
    0,...
    10,...
    10,...
    10,...
    10,...
    10]';
ThagardG = graph(ThagardPairs(:,1),ThagardPairs(:,2),...
    ThagardWeights,abbrev);

%% Use this function below...
% function wrapped = wordWrap(str,L)
% % Wrap string into lines of length < L (as possible)
% 
% foo = strsplit(str);
% bar = "";
% while numel(foo)
%     len = strlength(foo);
%     len(1:(end-1)) = len(1:(end-1))+1;  % account for spaces
%     ind = find(cumsum(len)<L,1,'last'); % last word under lineWidth
%     bar(end+1) = join(foo(1:ind));
%     foo = foo((ind+1):end);
% end
% wrapped = join(bar(2:end),newline);

%%
figure; 
w = G.Edges.Weight-5;
plo = plot(G,'EdgeCData',w,'Layout','layered','LineWidth',.5*abs(w)+eps);
xData = [];
yData = []; 
for j = 1:numel(nums)
    foo = (1:nums(j))-mean(1:nums(j));
    if j == 1 || j == numel(nums)
        xDataNew = -j+.25*cos(pi*foo/nums(j));
    else
        xDataNew = -j*ones(1,nums(j));
    end
    if j == 3
        yDataNew = yDataNew(negativeEvidenceIndices);   % line up
    else
        yDataNew = foo;
    end
    xData = [xData,xDataNew];
    yData = [yData,yDataNew]; 
end
plo.XData = xData;
plo.YData = yData;
lin = linspace(0,1,100)'; 
colormap([lin(end:-1:1),zeros(size(lin)),lin]);
% plo.NodeLabel = arrayfun(@(x)wordWrap(x,30),vertices);
plo.NodeLabel = [];
% nodeLabel = arrayfun(@(x)wordWrap(x,40),vertices);
nodeLabel = abbrev;
for v = 1:numel(vertices)
    if ismember(vertices(v),negativeHypotheses)
        text(plo.XData(v),plo.YData(v),nodeLabel(v),...
            'VerticalAlignment','middle','HorizontalAlignment','right');
    else
        text(plo.XData(v),plo.YData(v),nodeLabel(v),...
            'VerticalAlignment','middle');
    end
end

%%
figure; 
subw = subG.Edges.Weight-5;
subplo = plot(subG,'EdgeCData',subw,'Layout','layered','LineWidth',.5*abs(subw)+eps);
%
subplo.XData = xData;
subplo.YData = yData;
lin = linspace(0,1,100)'; 
colormap([lin(end:-1:1),zeros(size(lin)),lin]);
% plo.NodeLabel = arrayfun(@(x)wordWrap(x,30),vertices);
subplo.NodeLabel = [];
% nodeLabel = arrayfun(@(x)wordWrap(x,40),vertices);
nodeLabel = abbrev;
for v = 1:numel(vertices)
    if ismember(vertices(v),negativeHypotheses)
        text(subplo.XData(v),subplo.YData(v),nodeLabel(v),...
            'VerticalAlignment','middle','HorizontalAlignment','right');
    else
        text(subplo.XData(v),subplo.YData(v),nodeLabel(v),...
            'VerticalAlignment','middle');
    end
end
% Save
fileDir = '.';
fileName = ['VincennesGraphChatGPT',num2str(yyyymmdd(datetime))];
print([fileDir,filesep,fileName],'-dpng');
print([fileDir,filesep,fileName],'-dpdf');

%%
figure; 
TW = ThagardG.Edges.Weight-5;
Tplo = plot(ThagardG,'EdgeCData',TW,'Layout','layered','LineWidth',.5*abs(TW)+eps);
%
Tplo.XData = xData;
Tplo.YData = yData;
lin = linspace(0,1,100)'; 
colormap([lin(end:-1:1),zeros(size(lin)),lin]);
% plo.NodeLabel = arrayfun(@(x)wordWrap(x,30),vertices);
Tplo.NodeLabel = [];
% nodeLabel = arrayfun(@(x)wordWrap(x,40),vertices);
nodeLabel = abbrev;
for v = 1:numel(vertices)
    if ismember(vertices(v),negativeHypotheses)
        text(Tplo.XData(v),Tplo.YData(v),nodeLabel(v),...
            'VerticalAlignment','middle','HorizontalAlignment','right');
    else
        text(Tplo.XData(v),Tplo.YData(v),nodeLabel(v),...
            'VerticalAlignment','middle');
    end
end
% Save
fileDir = '.';
fileName = ['VincennesGraphThagard',num2str(yyyymmdd(datetime))];
print([fileDir,filesep,fileName],'-dpng');
print([fileDir,filesep,fileName],'-dpdf');


%%
clear bar;

% figure;
% bar(1:numel(subw),[subw,TW]/5);
% xticks(1:numel(subw));
% xtickangle(90);
% xticklabels(join(string(abbrevG.Edges.EndNodes(indT,:)),'-'));

h = figure;
set(h,'Position',[0,0,280,420]);
bh = barh(1:numel(subw),[subw,TW]/5);
    bh(1).FaceColor = 'b';%[1,1,1]*2/3;
    bh(1).EdgeColor = "none";
    bh(2).FaceColor = 'r';%[1,1,1]*0;
    bh(2).EdgeColor = "none";
% xticks([-1,0,1]);
xlabel('median consistency in [-1,1]')
yticks(1:numel(subw));
yticklabels(join(string(abbrevG.Edges.EndNodes(indT,:)),'-'));
view([0,0,-90]);    % vertical flip
legend(["ChatGPT 4","Thagard"],...
    "Location","northwest","Orientation","vertical");

%% Save
fileDir = '/Users/sha0639/Documents/BD';
fileName = ['VincennesRatings',num2str(yyyymmdd(datetime))];
print([fileDir,filesep,fileName],'-dpng');
print([fileDir,filesep,fileName],'-dpdf');

%%
% negG = graph(10-adjacency(subG,'weighted'),vertices);
% [mf,GF,cs,ct] = maxflow(subG,1,numel(vertices))